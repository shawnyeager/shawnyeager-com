{{/*
Purpose: Essays listing page for shawnyeager.com

Features:
- Page header with title
- Topic browsing section
- Paginated essays list (chronological, newest first)
- Pagination controls
- Draft filtering in production

Important Notes:
- Overrides theme default list.html for essays
- Uses new page-container pattern for consistent vertical rhythm
- Date format: "2006 · 01" (year · month)
- Pagination configured in hugo.toml (pagerSize)
*/}}

{{ define "main" }}
<div class="page-container">

    <!-- Page Header -->
    <section class="page-header">
        <h1>{{ .Title }}</h1>
    </section>

    <!-- Topics -->
    {{ if .Site.Taxonomies.topics }}
    <section class="essays-topics-section">
        {{ partial "topic-list.html" (dict "context" . "heading" "Browse by Topic") }}
    </section>
    {{ end }}

    <!-- All Essays -->
    <section class="essays-list-section">
        {{ $posts := where .Pages "Type" "essays" }}
        {{ if not hugo.IsServer }}
        {{ $posts = where $posts "Draft" false }}
        {{ end }}
        {{ $paginator := .Paginate $posts }}
        {{ range $paginator.Pages }}
        <article class="essay-item">
            <a href="{{ .RelPermalink }}">
                <time datetime="{{ .Date.Format "2006-01-02" }}" class="essay-date">{{ .Date.Format "2006 · 01" }}</time>
                <span class="essay-title">{{ .Title }}</span>
            </a>
        </article>
        {{ end }}
    </section>

    {{ partial "pagination.html" (dict "paginator" $paginator "prevText" "Newer essays" "nextText" "Older essays") }}

</div>
{{ end }}
