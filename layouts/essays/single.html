{{/*
REMINDER: Always add a description in frontmatter for SEO and social sharing:
---
title: "Essay Title"
description: "A concise 1-2 sentence summary of the essay for SEO meta tags and social media."
---
*/}}
{{ define "main" }}
    <article class="essay-content">
        {{/* Hero Image - displays when hero_image is set in frontmatter */}}
        {{ with .Params.hero_image }}
            {{ $img := resources.Get . }}
            {{ if $img }}
                {{ $webp := $img.Process "webp q85" }}
                {{ $png := $img.Process "png q85" }}
                <figure class="essay-hero">
                    <picture>
                        <source srcset="{{ $webp.RelPermalink }}" type="image/webp">
                        <img
                            src="{{ $png.RelPermalink }}"
                            alt="{{ $.Params.hero_alt | default $.Title }}"
                            class="essay-hero-image"
                            loading="eager"
                            width="{{ $img.Width }}"
                            height="{{ $img.Height }}"
                        >
                    </picture>
                </figure>
            {{ end }}
        {{ end }}

        <header>
            <!-- Essay Title -->
            <h1 class="essay-title-single">{{ .Title }}</h1>

            <!-- Essay Metadata -->
            <div class="page-meta">
                <time datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "January 2, 2006" }}</time>
                {{ if .Site.Params.show_read_time }}
                <span class="page-meta-separator">Â·</span>
                <span class="essay-reading-time">{{ .ReadingTime }} min read</span>
                {{ end }}
            </div>
        </header>

        <!-- Essay Content -->
        <div class="essay-body">
            {{ .Content | safeHTML }}
        </div>

        <!-- Essay Footer & Navigation -->
        {{- with .Params.acknowledgment }}
        <p class="aside">{{ . }}</p>
        {{- end }}
        {{- partial "content-nav.html" (dict
            "action_url" (printf "/%s/v4v/" .Params.slug)
            "action_text" "Zap this essay"
            "action_icon" "lightning"
            "action_event" .Site.Params.plausible_events.v4v_essay
            "back_url" ("essays" | relURL)
            "back_text" "All essays"
            "back_event" .Site.Params.plausible_events.all_essays
        ) -}}
    </article>
{{ end }}
