{{/*
Purpose: Homepage for shawnyeager.com - Advisory Landing Page

Sections:
1. Hero - Headline, subhead, sector tags, CTA
2. Intro - The "why before what" positioning
3. Who I Work With - Qualification criteria
4. How I Work - Process overview
5. Why Me - Credentials and proof metrics
6. Offers - Three service tiers
7. CTA Banner - GTM Map lead magnet
8. Essays - Demoted to credibility section

Important Notes:
- Content comes from /content/_index.md frontmatter and body
- Overrides theme default index.html
*/}}

{{ define "main" }}
<div class="landing-page">

    <!-- Hero -->
    <section class="landing-hero">
        <div class="landing-hero-content">
            <h1 class="landing-headline">{{ .Params.hero_headline }}</h1>
            <p class="landing-subhead">{{ .Params.hero_subhead }}</p>
            <p class="sector-tags">{{ .Params.sector_tags | safeHTML }}</p>
            {{ with .Params.hero_cta }}
            <a href="{{ .url }}" class="btn-ghost btn-ghost--primary">
                <span class="link-text">{{ .text }}</span><span class="arrow" aria-hidden="true">→</span>
            </a>
            {{ end }}
        </div>
    </section>

    <!-- Intro -->
    {{ with .Params.intro }}
    <section class="landing-section">
        <p>{{ .text | safeHTML }}</p>
        {{ with .emphasis }}<p class="landing-emphasis">{{ . }}</p>{{ end }}
    </section>
    {{ end }}

    <!-- Who I Work With -->
    {{ with .Params.who }}
    <section class="landing-section">
        <h2 class="landing-section-label">{{ .label }}</h2>
        {{ range .paragraphs }}
        <p>{{ . | safeHTML }}</p>
        {{ end }}
    </section>
    {{ end }}

    <!-- How I Work -->
    {{ with .Params.how }}
    <section class="landing-section">
        <h2 class="landing-section-label">{{ .label }}</h2>
        {{ range .paragraphs }}
        <p>{{ . | safeHTML }}</p>
        {{ end }}
        {{ with .list }}
        <ul>
            {{ range . }}
            <li>{{ . }}</li>
            {{ end }}
        </ul>
        {{ end }}
    </section>
    {{ end }}

    <!-- Why Me -->
    {{ with .Params.why }}
    <section class="landing-section">
        <h2 class="landing-section-label">{{ .label }}</h2>

        {{ with .metrics }}
        <div class="proof-metrics">
            {{ range . }}
            <div class="proof-metric">
                <div class="proof-metric-value">{{ .value }}</div>
                <div class="proof-metric-label">{{ .label }}</div>
            </div>
            {{ end }}
        </div>
        {{ end }}

        {{ with .credentials }}
        <p class="proof-credentials">{{ . | safeHTML }}</p>
        {{ end }}

        {{ with .emphasis }}<p class="landing-emphasis">{{ . }}</p>{{ end }}
    </section>
    {{ end }}

    <!-- Offers -->
    {{ with .Params.offers }}
    <section class="landing-section landing-section--offers">
        <h2 class="landing-section-label">{{ .label }}</h2>
        <div class="offer-grid">
            {{ range .cards }}
            <article class="offer-card{{ if .featured }} offer-card--featured{{ end }}">
                <h3 class="offer-card-title">{{ .title }}</h3>
                <p class="offer-card-price">{{ .price }}{{ with .price_note }} <span>{{ . }}</span>{{ end }}</p>
                <p class="offer-card-description">{{ .description }}</p>
                {{ with .features }}
                <ul>
                    {{ range . }}
                    <li>{{ . }}</li>
                    {{ end }}
                </ul>
                {{ end }}
                {{- partial "links/action.html" (dict "url" .cta_url "text" .cta_text) -}}
            </article>
            {{ end }}
        </div>
    </section>
    {{ end }}

    <!-- CTA Banner -->
    {{ with .Params.cta_banner }}
    <section class="cta-banner">
        <h2 class="cta-banner-headline">{{ .headline }}</h2>
        {{ range .paragraphs }}
        <p class="cta-banner-body">{{ . | safeHTML }}</p>
        {{ end }}
        <a href="{{ .cta_url }}" class="btn-ghost btn-ghost--primary">
            <span class="link-text">{{ .cta_text }}</span><span class="arrow" aria-hidden="true">→</span>
        </a>
        {{ with .secondary }}
        <p class="cta-banner-secondary">{{ . | safeHTML }}</p>
        {{ end }}
    </section>
    {{ end }}

    <!-- Recent Essays (demoted) -->
    {{ $posts := where .Site.RegularPages "Type" "essays" }}
    {{ if not hugo.IsServer }}
    {{ $posts = where $posts "Draft" false }}
    {{ end }}
    {{ if $posts }}
    <section class="landing-essays">
        <h2 class="section-label-small">Recent Essays</h2>
        {{ range first 5 $posts }}
        <article class="essay-item">
            <a href="{{ .RelPermalink }}">
                <time datetime="{{ .Date.Format "2006-01-02" }}" class="essay-date">{{ .Date.Format "2006 · 01" }}</time>
                <span class="essay-title">{{ .Title }}</span>
            </a>
        </article>
        {{ end }}
        <div class="all-essays">{{- partial "links/action.html" (dict "url" ("essays" | relURL) "text" "All essays" "event" .Site.Params.plausible_events.all_essays) -}}</div>
    </section>
    {{ end }}

</div>
{{ end }}
